-- Ran Traits
INSERT INTO Types
(Type,  Kind)
VALUES
('TRAIT_LEADER_RAN_gkls621', 'KIND_TRAIT'),
('ABILITY_RAN_WEARINESS_COMBAT_gkls621', 'KIND_ABILITY'),
('ABILITY_RAN_DOUBLE_FLANKING_gkls621',  'KIND_ABILITY'),
('ABILITY_RAN_DOUBLE_SUPPORT_gkls621',   'KIND_ABILITY'),
('ABILITY_RAN_QUADED_FLANKING_gkls621',  'KIND_ABILITY'),
('ABILITY_RAN_QUADED_SUPPORT_gkls621',   'KIND_ABILITY'),
('MODIFIER_AG_PLAYER_CAPITAL_CITY_ADJUST_TRAIT_AMENITY_gkls621', 'KIND_MODIFIER');

INSERT INTO DynamicModifiers (ModifierType, EffectType, CollectionType)
VALUES
('MODIFIER_AG_PLAYER_CAPITAL_CITY_ADJUST_TRAIT_AMENITY_gkls621', 'EFFECT_ADJUST_TRAIT_AMENITY', 'COLLECTION_PLAYER_CAPITAL_CITY');

INSERT INTO Traits
(TraitType,                     Name,                                   Description)
VALUES
('TRAIT_LEADER_RAN_gkls621', 'LOC_TRAIT_LEADER_RAN_gkls621_NAME', 'LOC_TRAIT_LEADER_RAN_gkls621_DESCRIPTION');

INSERT INTO LeaderTraits
(LeaderType,                TraitType)
VALUES
('LEADER_RAN_gkls621',   'TRAIT_LEADER_RAN_gkls621');
--('LEADER_RAN_gkls621',   'TRAIT_DISTRICT_IKEBANA_FAMILY_gkls621');

INSERT INTO TraitModifiers
(TraitType, ModifierId)
VALUES
('TRAIT_LEADER_RAN_gkls621',    'RAN_TRIPLE_WAR_WEARINESS_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_CITIES_DOUBLE_FLANKING_ATTACH_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_CITIES_DOUBLE_SUPPORT_ATTACH_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_CITIES_QUADED_FLANKING_ATTACH_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_CITIES_QUADED_SUPPORT_ATTACH_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_WEARINESS_COMBAT_STRENGTH_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_PLANTATION_PILLAGE_HEAL_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_PLANTATION_PILLAGE_SCIENCE_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_PLANTATION_PILLAGE_CULTURE_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_DISPLEASED_MILITARY_PRODUCTION_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_UNHAPPY_MILITARY_PRODUCTION_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_UNREST_MILITARY_PRODUCTION_gkls621'),
('TRAIT_LEADER_RAN_gkls621',    'RAN_REVOLT_MILITARY_PRODUCTION_gkls621');

INSERT INTO TraitModifiers
(TraitType, ModifierId)
SELECT
'TRAIT_LEADER_RAN_gkls621', 'RAN_' || h.HappinessType || '_NO_' || y.YieldType || '_LOSS_gkls621'
FROM Yields y JOIN Happinesses h
ON y.YieldType <> 'YIELD_FOOD' AND h.MaximumAmenityScore < 0;

INSERT INTO TraitModifiers
(TraitType, ModifierId)
SELECT
'TRAIT_LEADER_RAN_gkls621', 'RAN_' || HappinessType || '_NO_GROWTH_LOSS_gkls621'
FROM Happinesses
WHERE MaximumAmenityScore < 0;

INSERT INTO Modifiers
(ModifierId,    ModifierType,   SubjectRequirementSetId)
VALUES
('RAN_TRIPLE_WAR_WEARINESS_gkls621',                 'MODIFIER_PLAYER_ADJUST_WAR_WEARINESS',    NULL),
('RAN_CITIES_DOUBLE_FLANKING_ATTACH_gkls621',        'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER',    'REQSET_AG_CITY_LOW_HAPPINESS_gkls621'),
('RAN_CITIES_DOUBLE_SUPPORT_ATTACH_gkls621',         'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER',    'REQSET_AG_CITY_LOW_HAPPINESS_gkls621'),
('RAN_CITIES_QUADED_FLANKING_ATTACH_gkls621',        'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER',    'REQSET_AG_CITY_HAPPINESS_REVOLT_gkls621'),
('RAN_CITIES_QUADED_SUPPORT_ATTACH_gkls621',         'MODIFIER_PLAYER_CITIES_ATTACH_MODIFIER',    'REQSET_AG_CITY_HAPPINESS_REVOLT_gkls621'),
('RAN_WEARINESS_COMBAT_STRENGTH_gkls621',            'MODIFIER_PLAYER_UNITS_GRANT_ABILITY',       NULL),
('RAN_PLANTATION_PILLAGE_HEAL_gkls621',              'MODIFIER_PLAYER_ADJUST_ADDITIONAL_PILLAGING',    NULL),
('RAN_PLANTATION_PILLAGE_SCIENCE_gkls621',           'MODIFIER_PLAYER_ADJUST_ADDITIONAL_PILLAGING',    NULL),
('RAN_PLANTATION_PILLAGE_CULTURE_gkls621',           'MODIFIER_PLAYER_ADJUST_ADDITIONAL_PILLAGING',    NULL),
('RAN_DISPLEASED_MILITARY_PRODUCTION_gkls621',       'MODIFIER_PLAYER_CITIES_ADJUST_MILITARY_UNITS_PRODUCTION',  'REQSET_AG_CITY_HAPPINESS_DISPLEASED_gkls621'),
('RAN_UNHAPPY_MILITARY_PRODUCTION_gkls621',          'MODIFIER_PLAYER_CITIES_ADJUST_MILITARY_UNITS_PRODUCTION',  'REQSET_AG_CITY_HAPPINESS_UNHAPPY_gkls621'),
('RAN_UNREST_MILITARY_PRODUCTION_gkls621',           'MODIFIER_PLAYER_CITIES_ADJUST_MILITARY_UNITS_PRODUCTION',  'REQSET_AG_CITY_HAPPINESS_UNREST_gkls621'),
('RAN_REVOLT_MILITARY_PRODUCTION_gkls621',           'MODIFIER_PLAYER_CITIES_ADJUST_MILITARY_UNITS_PRODUCTION',  'REQSET_AG_CITY_HAPPINESS_REVOLT_gkls621'),
('RAN_WAR_WEARINESS_PROPERTY_gkls621',               'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH',    NULL),
('RAN_GRANT_DOUBLE_FLANKING_ABILITY_gkls621',        'MODIFIER_SINGLE_CITY_GRANT_ABILITY_FOR_TRAINED_UNITS',  NULL),
('RAN_GRANT_DOUBLE_SUPPORT_ABILITY_gkls621',         'MODIFIER_SINGLE_CITY_GRANT_ABILITY_FOR_TRAINED_UNITS',  NULL),
('RAN_DOUBLE_FLANKING_BONUS_gkls621',                'MODIFIER_PLAYER_UNIT_ADJUST_FLANKING_BONUS_MODIFIER',   NULL),
('RAN_DOUBLE_SUPPORT_BONUS_gkls621',                 'MODIFIER_PLAYER_UNIT_ADJUST_SUPPORT_BONUS_MODIFIER',    NULL),
('RAN_GRANT_QUADED_FLANKING_ABILITY_gkls621',        'MODIFIER_SINGLE_CITY_GRANT_ABILITY_FOR_TRAINED_UNITS',  NULL),
('RAN_GRANT_QUADED_SUPPORT_ABILITY_gkls621',         'MODIFIER_SINGLE_CITY_GRANT_ABILITY_FOR_TRAINED_UNITS',  NULL),
('RAN_QUADED_FLANKING_BONUS_gkls621',                'MODIFIER_PLAYER_UNIT_ADJUST_FLANKING_BONUS_MODIFIER',   NULL),
('RAN_QUADED_SUPPORT_BONUS_gkls621',                 'MODIFIER_PLAYER_UNIT_ADJUST_SUPPORT_BONUS_MODIFIER',    NULL),
('RAN_CAPITAL_AMENITY_SUBTRACT_gkls621',             'MODIFIER_AG_PLAYER_CAPITAL_CITY_ADJUST_TRAIT_AMENITY_gkls621',    NULL);

INSERT INTO Modifiers
(ModifierId,    ModifierType, SubjectRequirementSetId)
SELECT
'RAN_' || h.HappinessType || '_NO_' || y.YieldType || '_LOSS_gkls621',
'MODIFIER_PLAYER_CITIES_ADJUST_HAPPINESS_YIELD',
'PLAYER_IS_HUMAN'
FROM Yields y JOIN Happinesses h
ON y.YieldType <> 'YIELD_FOOD' AND h.MaximumAmenityScore < 0;

INSERT INTO Modifiers
(ModifierId,    ModifierType, SubjectRequirementSetId)
SELECT
'RAN_' || HappinessType || '_NO_GROWTH_LOSS_gkls621',
'MODIFIER_PLAYER_CITIES_ADJUST_CITY_GROWTH',
'REQSET_AG_CITY_' || HappinessType || '_gkls621'
FROM Happinesses
WHERE MaximumAmenityScore < 0;

INSERT INTO ModifierArguments
(ModifierId,    Name,   Value)
VALUES
('RAN_TRIPLE_WAR_WEARINESS_gkls621', 'Amount', 200),
('RAN_TRIPLE_WAR_WEARINESS_gkls621', 'Overall', 1),
('RAN_CITIES_DOUBLE_FLANKING_ATTACH_gkls621', 'ModifierId', 'RAN_GRANT_DOUBLE_FLANKING_ABILITY_gkls621'),
('RAN_CITIES_DOUBLE_SUPPORT_ATTACH_gkls621', 'ModifierId', 'RAN_GRANT_DOUBLE_SUPPORT_ABILITY_gkls621'),
('RAN_CITIES_QUADED_FLANKING_ATTACH_gkls621', 'ModifierId', 'RAN_GRANT_QUADED_FLANKING_ABILITY_gkls621'),
('RAN_CITIES_QUADED_SUPPORT_ATTACH_gkls621', 'ModifierId', 'RAN_GRANT_QUADED_SUPPORT_ABILITY_gkls621'),
('RAN_WEARINESS_COMBAT_STRENGTH_gkls621', 'AbilityType', 'ABILITY_RAN_WEARINESS_COMBAT_gkls621'),
('RAN_PLANTATION_PILLAGE_HEAL_gkls621', 'ImprovementType', 'IMPROVEMENT_PLANTATION'),
('RAN_PLANTATION_PILLAGE_HEAL_gkls621', 'PlunderType', 'PLUNDER_HEAL'),
('RAN_PLANTATION_PILLAGE_HEAL_gkls621', 'Amount', 50),
('RAN_PLANTATION_PILLAGE_SCIENCE_gkls621', 'ImprovementType', 'IMPROVEMENT_PLANTATION'),
('RAN_PLANTATION_PILLAGE_SCIENCE_gkls621', 'PlunderType', 'PLUNDER_SCIENCE'),
('RAN_PLANTATION_PILLAGE_SCIENCE_gkls621', 'Amount', 50),
('RAN_PLANTATION_PILLAGE_CULTURE_gkls621', 'ImprovementType', 'IMPROVEMENT_PLANTATION'),
('RAN_PLANTATION_PILLAGE_CULTURE_gkls621', 'PlunderType', 'PLUNDER_CULTURE'),
('RAN_PLANTATION_PILLAGE_CULTURE_gkls621', 'Amount', 50),
('RAN_DISPLEASED_MILITARY_PRODUCTION_gkls621',  'Amount',  50),
('RAN_DISPLEASED_MILITARY_PRODUCTION_gkls621',  'StartEra',  'ERA_ANCIENT'),
('RAN_DISPLEASED_MILITARY_PRODUCTION_gkls621',  'EndEra',  'ERA_FUTURE'),
('RAN_UNHAPPY_MILITARY_PRODUCTION_gkls621',     'Amount',  100),
('RAN_UNHAPPY_MILITARY_PRODUCTION_gkls621',     'StartEra',  'ERA_ANCIENT'),
('RAN_UNHAPPY_MILITARY_PRODUCTION_gkls621',     'EndEra',  'ERA_FUTURE'),
('RAN_UNREST_MILITARY_PRODUCTION_gkls621',      'Amount',  200),
('RAN_UNREST_MILITARY_PRODUCTION_gkls621',      'StartEra',  'ERA_ANCIENT'),
('RAN_UNREST_MILITARY_PRODUCTION_gkls621',      'EndEra',  'ERA_FUTURE'),
('RAN_REVOLT_MILITARY_PRODUCTION_gkls621',      'Amount',  400),
('RAN_REVOLT_MILITARY_PRODUCTION_gkls621',      'StartEra',  'ERA_ANCIENT'),
('RAN_REVOLT_MILITARY_PRODUCTION_gkls621',      'EndEra',  'ERA_FUTURE'),
('RAN_WAR_WEARINESS_PROPERTY_gkls621',  'Key',  'RAN_WAR_WEARINESS_PROPERTY'),
('RAN_GRANT_DOUBLE_FLANKING_ABILITY_gkls621',  'AbilityType',  'ABILITY_RAN_DOUBLE_FLANKING_gkls621'),
('RAN_GRANT_DOUBLE_SUPPORT_ABILITY_gkls621',   'AbilityType',  'ABILITY_RAN_DOUBLE_SUPPORT_gkls621'),
('RAN_DOUBLE_FLANKING_BONUS_gkls621',    'Percent',   100),
('RAN_DOUBLE_SUPPORT_BONUS_gkls621',     'Percent',   100),
('RAN_GRANT_QUADED_FLANKING_ABILITY_gkls621',  'AbilityType',  'ABILITY_RAN_QUADED_FLANKING_gkls621'),
('RAN_GRANT_QUADED_SUPPORT_ABILITY_gkls621',   'AbilityType',  'ABILITY_RAN_QUADED_SUPPORT_gkls621'),
('RAN_QUADED_FLANKING_BONUS_gkls621',    'Percent',   300),
('RAN_QUADED_SUPPORT_BONUS_gkls621',     'Percent',   300),
('RAN_CAPITAL_AMENITY_SUBTRACT_gkls621', 'Amount', -1);

INSERT INTO ModifierArguments
(ModifierId,    Name,   Value)
SELECT
'RAN_' || h.HappinessType || '_NO_' || y.YieldType || '_LOSS_gkls621',
'Amount',
h.NonFoodYieldModifier * (-1)
FROM Yields y JOIN Happinesses h
ON y.YieldType <> 'YIELD_FOOD' AND h.MaximumAmenityScore < 0;

INSERT INTO ModifierArguments
(ModifierId,    Name,   Value)
SELECT
'RAN_' || h.HappinessType || '_NO_' || y.YieldType || '_LOSS_gkls621',
'YieldType',
y.YieldType
FROM Yields y JOIN Happinesses h
ON y.YieldType <> 'YIELD_FOOD' AND h.MaximumAmenityScore < 0;

INSERT INTO ModifierArguments
(ModifierId,    Name,   Value)
SELECT
'RAN_' || h.HappinessType || '_NO_' || y.YieldType || '_LOSS_gkls621',
'HappinessType',
h.HappinessType
FROM Yields y JOIN Happinesses h
ON y.YieldType <> 'YIELD_FOOD' AND h.MaximumAmenityScore < 0;

INSERT INTO ModifierArguments
(ModifierId,    Name,   Value)
SELECT
'RAN_' || HappinessType || '_NO_GROWTH_LOSS_gkls621',
'Amount',
GrowthModifier * (-1)
FROM Happinesses
WHERE MaximumAmenityScore < 0;

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType)
VALUES
('REQSET_AG_CITY_LOW_HAPPINESS_gkls621', 'REQUIREMENTSET_TEST_ANY');

INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId)
SELECT
'REQSET_AG_CITY_LOW_HAPPINESS_gkls621', 'AG_CITY_' || HappinessType || '_gkls621'
FROM Happinesses
WHERE MaximumAmenityScore < 0 AND MinimumAmenityScore IS NOT NULL;

INSERT INTO RequirementSets
(RequirementSetId,  RequirementSetType)
SELECT
'REQSET_AG_CITY_' || HappinessType || '_gkls621',
'REQUIREMENTSET_TEST_ALL'
FROM Happinesses
WHERE MaximumAmenityScore < 0;

INSERT INTO RequirementSetRequirements
(RequirementSetId,  RequirementId)
SELECT
'REQSET_AG_CITY_' || HappinessType || '_gkls621',
'AG_CITY_' || HappinessType || '_gkls621'
FROM Happinesses
WHERE MaximumAmenityScore < 0;

INSERT INTO Requirements
(RequirementId, RequirementType)
SELECT
'AG_CITY_' || HappinessType || '_gkls621',
'REQUIREMENT_PLOT_PROPERTY_MATCHES'
FROM Happinesses
WHERE MaximumAmenityScore < 0;

INSERT INTO RequirementArguments
(RequirementId, Name,   Value)
SELECT
'AG_CITY_' || HappinessType || '_gkls621',
'PropertyName', 'AG_CITY_AMENITY_LEVEL_' || HappinessType
FROM Happinesses WHERE MaximumAmenityScore < 0
UNION SELECT
'AG_CITY_' || HappinessType || '_gkls621',
'PropertyMinimum', 1
FROM Happinesses WHERE MaximumAmenityScore < 0;

-- Unit Ability
INSERT INTO TypeTags
(Type,  Tag)
VALUES
('ABILITY_RAN_WEARINESS_COMBAT_gkls621', 'CLASS_ALL_COMBAT_UNITS'),
('ABILITY_RAN_DOUBLE_FLANKING_gkls621', 'CLASS_ALL_COMBAT_UNITS'),
('ABILITY_RAN_DOUBLE_SUPPORT_gkls621',   'CLASS_ALL_COMBAT_UNITS'),
('ABILITY_RAN_QUADED_FLANKING_gkls621', 'CLASS_ALL_COMBAT_UNITS'),
('ABILITY_RAN_QUADED_SUPPORT_gkls621',   'CLASS_ALL_COMBAT_UNITS');

INSERT INTO UnitAbilities
(UnitAbilityType,   Name,   Description, Inactive)
VALUES
('ABILITY_RAN_WEARINESS_COMBAT_gkls621', 'LOC_TRAIT_LEADER_RAN_gkls621_NAME', 'LOC_ABILITY_RAN_WEARINESS_COMBAT_gkls621_DESCRIPTION', 1),
('ABILITY_RAN_DOUBLE_FLANKING_gkls621',  'LOC_TRAIT_LEADER_RAN_gkls621_NAME',  'LOC_ABILITY_RAN_DOUBLE_FLANKING_gkls621_DESCRIPTION', 1),
('ABILITY_RAN_DOUBLE_SUPPORT_gkls621',   'LOC_TRAIT_LEADER_RAN_gkls621_NAME',   'LOC_ABILITY_RAN_DOUBLE_SUPPORT_gkls621_DESCRIPTION', 1),
('ABILITY_RAN_QUADED_FLANKING_gkls621',  'LOC_TRAIT_LEADER_RAN_gkls621_NAME',  'LOC_ABILITY_RAN_QUADED_FLANKING_gkls621_DESCRIPTION', 1),
('ABILITY_RAN_QUADED_SUPPORT_gkls621',   'LOC_TRAIT_LEADER_RAN_gkls621_NAME',   'LOC_ABILITY_RAN_QUADED_SUPPORT_gkls621_DESCRIPTION', 1);

INSERT INTO UnitAbilityModifiers
(UnitAbilityType, ModifierId)
VALUES
('ABILITY_RAN_WEARINESS_COMBAT_gkls621', 'RAN_WAR_WEARINESS_PROPERTY_gkls621'),
('ABILITY_RAN_DOUBLE_FLANKING_gkls621',  'RAN_DOUBLE_FLANKING_BONUS_gkls621'),
('ABILITY_RAN_DOUBLE_SUPPORT_gkls621',   'RAN_DOUBLE_SUPPORT_BONUS_gkls621'),
('ABILITY_RAN_QUADED_FLANKING_gkls621',  'RAN_QUADED_FLANKING_BONUS_gkls621'),
('ABILITY_RAN_QUADED_SUPPORT_gkls621',   'RAN_QUADED_SUPPORT_BONUS_gkls621');

INSERT INTO ModifierStrings
(ModifierId, Context, Text)
VALUES
('RAN_WAR_WEARINESS_PROPERTY_gkls621', 'Preview', 'LOC_RAN_WAR_WEARINESS_PROPERTY_gkls621');