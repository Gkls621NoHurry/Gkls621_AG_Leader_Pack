-- Himari's Special Emergencies
-- Acknowledgement: JIDONG's Hakurei Reimu
INSERT INTO Types
(Type, Kind)
VALUES
('EMERGENCY_AAO_gkls621', 'KIND_DIPLOMACY_EMERGENCY'),
('EMERGENCY_REPOST_gkls621', 'KIND_DIPLOMACY_EMERGENCY'),
('MODIFIER_AG_EMERGENCY_CITIES_ADJUST_DISTRICT_PRODUCTION_gkls621', 'KIND_MODIFIER'),
('MODIFIER_AG_EMERGENCY_CITIES_ADJUST_WONDER_YIELD_CHANGE_gkls621', 'KIND_MODIFIER');
--('MODIFIER_AG_EMERGENCY_CITIES_ADJUST_TOURISM_gkls621', 'KIND_MODIFIER'),
--('MODIFIER_AG_EMERGENCY_PLAYERS_ADD_CULTURE_BOMB_TRIGGER_gkls621', 'KIND_MODIFIER');

INSERT INTO DynamicModifiers (ModifierType, EffectType, CollectionType)
VALUES
('MODIFIER_AG_EMERGENCY_CITIES_ADJUST_DISTRICT_PRODUCTION_gkls621', 'EFFECT_ADJUST_DISTRICT_PRODUCTION', 'COLLECTION_EMERGENCY_CITIES'),
('MODIFIER_AG_EMERGENCY_CITIES_ADJUST_WONDER_YIELD_CHANGE_gkls621', 'EFFECT_ADJUST_WONDER_YIELD_CHANGE', 'COLLECTION_EMERGENCY_CITIES');
--('MODIFIER_AG_EMERGENCY_CITIES_ADJUST_TOURISM_gkls621', 'EFFECT_ADJUST_CITY_TOURISM', 'COLLECTION_EMERGENCY_CITIES'),
--('MODIFIER_AG_EMERGENCY_PLAYERS_ADD_CULTURE_BOMB_TRIGGER_gkls621', 'EFFECT_ADD_CULTURE_BOMB_TRIGGER', 'COLLECTION_EMERGENCY_PLAYERS');

INSERT INTO EmergencyAlliances
(EmergencyType, Duration, LockoutTime,
WarOnTarget, KillFriendship, InformTarget, OpenBorders, ShareVis, RemovesWarState,
TargetRequirementSet, MemberRequirementSet, 
Trigger, GoalTrigger,
Name, EmergencyText, GoalText)
VALUES
('EMERGENCY_AAO_gkls621', 10, 20,
0, 0, 0, 0, 0, 0, 
'REQSET_AG_HIMARI_TARGETS_gkls621', 'REQSET_AG_HIMARI_MEMBERS_gkls621',
'EMERGENCY_TRIGGER_GAME_TURN', 'EMERGENCY_TRIGGER_NONE',
'LOC_EMERGENCY_AAO_gkls621_NAME', 'HimariAAO', 'HimariAAOGoal'),
('EMERGENCY_REPOST_gkls621', 20, 35,
0, 0, 0, 0, 0, 0, 
'REQSET_AG_HIMARI_TARGETS_gkls621', 'REQSET_AG_HIMARI_MEMBERS_gkls621',
'EMERGENCY_TRIGGER_GAME_TURN', 'EMERGENCY_TRIGGER_NONE',
'LOC_EMERGENCY_REPOST_gkls621_NAME', 'HimariRepost', 'HimariRepostGoal');

INSERT INTO Emergencies_XP2
(EmergencyType, Hostile, NoTarget, UIType, UIBackgroundPrefix, NoCongress)
VALUES
('EMERGENCY_AAO_gkls621', 0, 1, 'COMPETITION', '', 1),
('EMERGENCY_REPOST_gkls621', 0, 1, 'COMPETITION', '', 1);

INSERT INTO EmergencyBuffs
(EmergencyType, ModifierID, Description)
VALUES
('EMERGENCY_AAO_gkls621', 'AAO_BUFF_CAMPUS_CONSTRUCTION_BONUS_gkls621', 'LOC_EMERGENCY_AAO_gkls621_BUFF_DESCRIPTION'),
('EMERGENCY_AAO_gkls621', 'AAO_BUFF_THEATER_CONSTRUCTION_BONUS_gkls621', NULL),
('EMERGENCY_REPOST_gkls621', 'REPOST_BUFF_CITIES_CULTURE_WITH_WONDER_gkls621', 'LOC_EMERGENCY_REPOST_gkls621_BUFF_DESCRIPTION'),
('EMERGENCY_REPOST_gkls621', 'REPOST_BUFF_CITIES_GOLD_WITH_WONDER_gkls621', NULL);

INSERT INTO EmergencyRewards
(EmergencyType, ModifierID, Description, OnSuccess, FirstPlace, TopTier, BottomTier)
VALUES
('EMERGENCY_AAO_gkls621',    'AAO_GRANT_ARTIST_gkls621',                'LOC_AAO_GRANT_ARTIST_gkls621',                1, 1, 0, 0),
--('EMERGENCY_AAO_gkls621',  'AAO_HIMARI_GRANT_ENGINEER_gkls621'        '', 1, 1, 0, 0),
('EMERGENCY_AAO_gkls621',    'AAO_GRANT_GOLD_MEDIUM_gkls621',           'LOC_AAO_GRANT_GPP_MEDIUM_gkls621',            1, 0, 1, 0),
('EMERGENCY_AAO_gkls621',    'AAO_GRANT_GOLD_SMALL_gkls621',            'LOC_AAO_GRANT_GPP_SMALL_gkls621',             1, 0, 0, 1),
('EMERGENCY_REPOST_gkls621', 'REPOST_GRANT_MERCHANT_gkls621',           'LOC_REPOST_CITIES_WONDER_TOURISM_gkls621',     1, 1, 0, 0),
('EMERGENCY_REPOST_gkls621', 'REPOST_GRANT_GPP_MEDIUM_gkls621',         'LOC_REPOST_THEATER_CULTURAL_BOMB_gkls621',     1, 0, 1, 0),
('EMERGENCY_REPOST_gkls621', 'REPOST_GRANT_GPP_SMALL_gkls621',          'LOC_REPOST_DIPLOMATIC_CULTURAL_BOMB_gkls621',  1, 0, 0, 1);

INSERT INTO EmergencyTexts
(Type, Flavor, Description, DescriptionShorter)
VALUES
('HimariAAO',    'LOC_EMERGENCY_AAO_gkls621_FLAVOR',    'LOC_EMERGENCY_AAO_gkls621_DESCRIPTION',    'LOC_EMERGENCY_AAO_gkls621_SUMMARY'),
('HimariRepost', 'LOC_EMERGENCY_REPOST_gkls621_FLAVOR', 'LOC_EMERGENCY_REPOST_gkls621_DESCRIPTION', 'LOC_EMERGENCY_REPOST_gkls621_SUMMARY');

INSERT INTO EmergencyGoalTexts
(GoalType, GoalDescription,
ShortGoalDescription, TentativeGoalDescription,
ListGoal, ShortTargetGoalDescription)
VALUES
('HimariAAOGoal', 'LOC_EMERGENCY_AAO_gkls621_GOAL',
'LOC_EMERGENCY_GOAL_SHORT_COMPETE_WITH_OTHERS', 'LOC_EMERGENCY_GOAL_TENTATIVE_COMPETE_WITH_OTHERS',
'LOC_EMERGENCY_GOAL_LIST_COMPETE_WITH_OTHERS', 'LOC_EMERGENCY_GOAL_SHORT_TARGET_RECEIVE_AID'),
('HimariRepostGoal', 'LOC_EMERGENCY_REPOST_gkls621_GOAL',
'LOC_EMERGENCY_GOAL_SHORT_COMPETE_WITH_OTHERS', 'LOC_EMERGENCY_GOAL_TENTATIVE_COMPETE_WITH_OTHERS',
'LOC_EMERGENCY_GOAL_LIST_COMPETE_WITH_OTHERS', 'LOC_EMERGENCY_GOAL_SHORT_TARGET_RECEIVE_AID');

INSERT INTO EmergencyScoreSources
(EmergencyType, ScoreSourceType, FromGreatPerson, FromDistrict, FromProject, ScoreAmount, Description)
VALUES
('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_WRITER_gkls621',     'GREAT_PERSON_CLASS_WRITER',   NULL, NULL, 1, 'LOC_AAO_SCORE_FROM_ARTIST_gkls621_DESCRIPTION'),
('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_ARTIST_gkls621',     'GREAT_PERSON_CLASS_ARTIST',   NULL, NULL, 1, NULL),
('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_MUSICIAN_gkls621',     'GREAT_PERSON_CLASS_MUSICIAN',   NULL, NULL, 1, NULL),
('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_SCIENTIST_gkls621',   'GREAT_PERSON_CLASS_SCIENTIST', NULL, NULL, 1, 'LOC_AAO_SCORE_FROM_SCIENTIST_gkls621_DESCRIPTION'),

('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_THEATER_gkls621',   NULL, 'DISTRICT_THEATER', NULL , 3, NULL),
('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_CAMPUS_gkls621',      NULL, 'DISTRICT_CAMPUS', NULL, 3, NULL);

--('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_THEATER_PROJECT_gkls621',   NULL, NULL, 'PROJECT_ENHANCE_DISTRICT_THEATER' , 20, NULL),
--('EMERGENCY_AAO_gkls621', 'AAO_SCORE_FROM_CAMPUS_PROJECT_gkls621',      NULL, NULL, 'PROJECT_ENHANCE_DISTRICT_CAMPUS', 20, NULL);

INSERT INTO EmergencyScoreSources
(EmergencyType, ScoreSourceType, FromBuilding, ScoreAmount)
SELECT
'EMERGENCY_REPOST_gkls621', 'REPOST_SCORE_FROM_' || BuildingType || '_gkls621',
BuildingType, 10
FROM Buildings WHERE IsWonder = 1;

UPDATE EmergencyScoreSources SET Description = 'LOC_REPOST_SCORE_FROM_WONDERS_gkls621_DESCRIPTION'
WHERE EmergencyType = 'EMERGENCY_REPOST_gkls621' AND FromBuilding = 'BUILDING_STONEHENGE';

INSERT INTO Modifiers
(ModifierId, ModifierType, SubjectRequirementSetId)
VALUES
('AAO_BUFF_CAMPUS_CONSTRUCTION_BONUS_gkls621', 'MODIFIER_AG_EMERGENCY_CITIES_ADJUST_DISTRICT_PRODUCTION_gkls621',   'EMERGENCY_MEMBER_REQUIREMENTS'),
('AAO_BUFF_THEATER_CONSTRUCTION_BONUS_gkls621',      'MODIFIER_AG_EMERGENCY_CITIES_ADJUST_DISTRICT_PRODUCTION_gkls621', 'EMERGENCY_MEMBER_REQUIREMENTS'),
('REPOST_BUFF_CITIES_CULTURE_WITH_WONDER_gkls621', 'MODIFIER_AG_EMERGENCY_CITIES_ADJUST_WONDER_YIELD_CHANGE_gkls621', 'EMERGENCY_MEMBER_REQUIREMENTS'),
('REPOST_BUFF_CITIES_GOLD_WITH_WONDER_gkls621', 'MODIFIER_AG_EMERGENCY_CITIES_ADJUST_WONDER_YIELD_CHANGE_gkls621', 'EMERGENCY_MEMBER_REQUIREMENTS'),
('AAO_GRANT_ARTIST_gkls621',  'MODIFIER_EMERGENCY_CAPITAL_CITIES_GRANT_GREAT_PERSON_CLASS_IN_CITY', 'SCORED_COMPETITION_FIRST_PLACE_REQUIREMENTS'),
('AAO_GRANT_GOLD_MEDIUM_gkls621',  'MODIFIER_EMERGENCY_PLAYERS_GRANT_YIELD', 'SCORED_COMPETITION_TOP_TIER_REQUIREMENTS'),
('AAO_GRANT_GOLD_SMALL_gkls621',  'MODIFIER_EMERGENCY_PLAYERS_GRANT_YIELD', 'SCORED_COMPETITION_BOTTOM_TIER_REQUIREMENTS'),
('REPOST_GRANT_MERCHANT_gkls621', 'MODIFIER_EMERGENCY_CAPITAL_CITIES_GRANT_GREAT_PERSON_CLASS_IN_CITY', 'SCORED_COMPETITION_FIRST_PLACE_REQUIREMENTS'),
('REPOST_GRANT_GPP_MEDIUM_gkls621', 'MODIFIER_EMERGENCY_PLAYERS_ADJUST_GREAT_PERSON_POINTS', 'SCORED_COMPETITION_TOP_TIER_REQUIREMENTS'),
('REPOST_GRANT_GPP_SMALL_gkls621', 'MODIFIER_EMERGENCY_PLAYERS_ADJUST_GREAT_PERSON_POINTS', 'SCORED_COMPETITION_BOTTOM_TIER_REQUIREMENTS');

INSERT INTO ModifierArguments
(ModifierId, Name, Value)
VALUES
('AAO_BUFF_CAMPUS_CONSTRUCTION_BONUS_gkls621', 'DistrictType', 'DISTRICT_CAMPUS'),
('AAO_BUFF_CAMPUS_CONSTRUCTION_BONUS_gkls621', 'Amount', 50),
('AAO_BUFF_THEATER_CONSTRUCTION_BONUS_gkls621', 'DistrictType', 'DISTRICT_THEATER'),
('AAO_BUFF_THEATER_CONSTRUCTION_BONUS_gkls621', 'Amount', 50),
('REPOST_BUFF_CITIES_CULTURE_WITH_WONDER_gkls621', 'YieldType', 'YIELD_CULTURE'),
('REPOST_BUFF_CITIES_CULTURE_WITH_WONDER_gkls621', 'Amount', 5),
('REPOST_BUFF_CITIES_GOLD_WITH_WONDER_gkls621', 'YieldType', 'YIELD_GOLD'),
('REPOST_BUFF_CITIES_GOLD_WITH_WONDER_gkls621', 'Amount', 8),
('AAO_GRANT_ARTIST_gkls621',  'Amount',   1),
('AAO_GRANT_ARTIST_gkls621',  'GreatPersonClassType',   'GREAT_PERSON_CLASS_ARTIST'),
('AAO_GRANT_GOLD_MEDIUM_gkls621', 'Amount',  500),
('AAO_GRANT_GOLD_MEDIUM_gkls621', 'YieldType',  'YIELD_GOLD'),
('AAO_GRANT_GOLD_SMALL_gkls621', 'Amount',  250),
('AAO_GRANT_GOLD_SMALL_gkls621', 'YieldType',  'YIELD_GOLD'),
('REPOST_GRANT_MERCHANT_gkls621', 'Amount', 1),
('REPOST_GRANT_MERCHANT_gkls621', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_MERCHANT'),
('REPOST_GRANT_GPP_MEDIUM_gkls621', 'Amount', 20),
('REPOST_GRANT_GPP_SMALL_gkls621', 'Amount', 10);

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType)
VALUES
('REQSET_AG_HIMARI_TARGETS_gkls621', 'REQUIREMENTSET_TEST_ALL'),
('REQSET_AG_HIMARI_MEMBERS_gkls621', 'REQUIREMENTSET_TEST_ALL');

INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId)
VALUES
('REQSET_AG_HIMARI_TARGETS_gkls621', 'AG_GAME_HAS_HIMARI_TRAIT_gkls621'),
('REQSET_AG_HIMARI_MEMBERS_gkls621', 'REQUIRES_PLAYER_IS_EMERGENCY_MEMBER');

INSERT INTO Requirements (RequirementId, RequirementType)
VALUES
('AG_GAME_HAS_HIMARI_TRAIT_gkls621', 'REQUIREMENT_GAME_HAS_CIVILIZATION_OR_LEADER_TRAIT');

INSERT INTO RequirementArguments (RequirementId, Name, Value)
VALUES
('AG_GAME_HAS_HIMARI_TRAIT_gkls621', 'TraitType', 'TRAIT_LEADER_HIMARI_gkls621');